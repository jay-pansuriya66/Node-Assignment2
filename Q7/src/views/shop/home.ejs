<%- include('../partials/header', { title: 'Shop' }) %>
<section class="card">
  <h2>Categories</h2>
  <div class="grid">
    <% tree.forEach(top => { %>
      <div class="card">
        <h3><%= top.name %></h3>
        <% if (top.children.length) { %>
          <ul>
          <% top.children.forEach(ch => { %>
            <li><a href="/category/<%= ch.id %>"><%= ch.name %></a></li>
          <% }) %>
          </ul>
        <% } else { %>
          <p>No subcategories yet.</p>
        <% } %>
      </div>
    <% }) %>
  </div>
</section>

<section class="card">
  <h2>Featured Products</h2>
  <div class="grid">
    <% featured.forEach(p => { %>
      <div class="card">
        <h3><a href="/product/<%= p.id %>"><%= p.name %></a></h3>
        <p class="price">â‚¹ <%= p.price.toFixed(2) %></p>
        <form method="post" action="/cart/add" class="flex">
          <input type="hidden" name="id" value="<%= p.id %>">
          <input type="number" name="qty" min="1" value="1" style="width:80px">
          <button class="btn" type="submit">Add to Cart</button>
        </form>
      </div>
    <% }) %>
  </div>
</section>
<%- include('../partials/footer') %>
